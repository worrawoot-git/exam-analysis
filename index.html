<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <title>Exam Analysis</title>
  <!-- Tailwind CDN (‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ class ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ) -->
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100">
  <div id="root"></div>

  <!-- React + ReactDOM (CDN) -->
  <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <!-- React Code -->
  <script type="text/babel">
    const { useState, useEffect } = React;

    /* ===== Icons ===== */
    const Icons = {
      Calculator: () => (
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><rect width="16" height="20" x="4" y="2" rx="2"/></svg>
      ),
      FileText: () => (<span>üìÑ</span>),
      RotateCcw: () => (<span>üîÑ</span>),
      Save: () => (<span>üìä</span>),
      Download: () => (<span>‚¨áÔ∏è</span>),
      Plus: () => (<span>‚ûï</span>),
      Trash2: () => (<span>üóëÔ∏è</span>),
      AlertTriangle: () => (<span>‚ö†Ô∏è</span>)
    };

    /* ===== Stat Card ===== */
    const StatCard = ({ title, value, desc }) => (
      <div className="bg-white p-4 rounded shadow">
        <div className="text-sm text-gray-500">{title}</div>
        <div className="text-2xl font-bold">{value}</div>
        <div className="text-xs text-gray-400">{desc}</div>
      </div>
    );

    /* ===== Main App ===== */
    const ExamAnalysis = () => {
      const [config, setConfig] = useState({ numQuestions: 5 });
      const [keyAnswers, setKeyAnswers] = useState(Array(5).fill(''));
      const [students, setStudents] = useState([]);
      const [results, setResults] = useState(null);

      useEffect(() => {
        setStudents([
          { name: '‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô 1', answers: Array(config.numQuestions).fill('') },
          { name: '‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô 2', answers: Array(config.numQuestions).fill('') }
        ]);
      }, []);

      const calculateResults = () => {
        const scores = students.map(s =>
          s.answers.filter((a, i) => a && a === keyAnswers[i]).length
        );
        const mean = (scores.reduce((a, b) => a + b, 0) / scores.length).toFixed(2);
        setResults({ mean, count: scores.length });
      };

      return (
        <div className="max-w-4xl mx-auto bg-white mt-10 p-6 rounded shadow">
          <h1 className="text-2xl font-bold mb-4 flex gap-2 items-center">
            <Icons.Calculator /> ‡∏£‡∏∞‡∏ö‡∏ö‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏Ç‡πâ‡∏≠‡∏™‡∏≠‡∏ö
          </h1>

          <table className="w-full border mb-4">
            <thead className="bg-gray-100">
              <tr>
                <th className="border p-2">‡∏ä‡∏∑‡πà‡∏≠</th>
                {keyAnswers.map((_, i) => <th key={i} className="border p-2">{i+1}</th>)}
              </tr>
            </thead>
            <tbody>
              <tr className="bg-yellow-50">
                <td className="border p-2 font-bold">Key</td>
                {keyAnswers.map((k, i) => (
                  <td key={i} className="border p-1">
                    <input className="w-full border" value={k}
                      onChange={e => {
                        const x = [...keyAnswers]; x[i] = e.target.value; setKeyAnswers(x);
                      }} />
                  </td>
                ))}
              </tr>
              {students.map((s, si) => (
                <tr key={si}>
                  <td className="border p-2">{s.name}</td>
                  {s.answers.map((a, ai) => (
                    <td key={ai} className="border p-1">
                      <input className="w-full border" value={a}
                        onChange={e => {
                          const ss = [...students]; ss[si].answers[ai] = e.target.value; setStudents(ss);
                        }} />
                    </td>
                  ))}
                </tr>
              ))}
            </tbody>
          </table>

          <button onClick={calculateResults}
            className="px-4 py-2 bg-indigo-600 text-white rounded">
            ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå
          </button>

          {results && (
            <div className="grid grid-cols-2 gap-4 mt-6">
              <StatCard title="‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢" value={results.mean} desc="Mean" />
              <StatCard title="‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô" value={results.count} desc="N" />
            </div>
          )}
        </div>
      );
    };

    ReactDOM.createRoot(document.getElementById('root')).render(<ExamAnalysis />);
  </script>
</body>
</html>
